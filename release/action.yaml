name: Make a Release
description: Make a ZIP-file of some folder and upload it to GitHub
inputs:
  folder:
    description: folder to make archive from
    required: true
  release-name:
    description: Name of release
    required: false
    default: ${{ github.event.repository.name }}
  release-tag:
    description: Tag name for release
    required: false
    default: ${{ env.build_version }}
  release-archive:
    description: destination ZIP file
    required: false
    default: ${{ inputs.release-name }}-${{ inputs.release-tag }}.zip
  github-token:
    description: GitHub token required to tag and deploy the release
    required: true
outputs:
  release-archive:
    description: Name of release archive
    value: ${{ inputs.release-archive }}
runs:
  using: "composite"
  steps:
    - name: Make release zip file
      run: (cd ${{ inputs.folder }}/; zip -r "../${{ inputs.release-archive }}" .)
      shell: bash
    - name: Upload Release
      uses: ncipollo/release-action@v1
      with:
        tag: ${{ inputs.release-tag }}
        artifacts: ${{ inputs.release-archive }}
        token: ${{ secrets.TOKEN }}
